<!DOCTYPE html>
<html lang="en">
<head>
        <title>dengdezhao : 利用javaMail发送邮件功能实现</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="http://pelican.dengdezhao.cn/theme/css/main.css" type="text/css" />
        <link href="http://pelican.dengdezhao.cn/None" type="application/atom+xml" rel="alternate" title="dengdezhao ATOM Feed" />

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://pelican.dengdezhao.cn/css/ie.css"/>
                <script src="http://pelican.dengdezhao.cn/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://pelican.dengdezhao.cn/css/ie6.css"/><![endif]-->

</head>

<body>
        
<header>
    <h1><a href="http://pelican.dengdezhao.cn" id="site-title">dengdezhao </a> :
        <a href="http://pelican.dengdezhao.cn/li-yong-javamailfa-song-you-jian-gong-neng-shi-xian.html" id="page-title">利用javaMail发送邮件功能实现</a></h1>
<time datetime="2012-06-26T00:00:00+08:00">2012-06-26(Tuesday) 00:00</time></header>
<article>
    <p>由于SMTP服务器需要采用SSL方式访问，所以蛋疼了，默认的连接25端口方式无法连接<br />
改成465方式访问，又报连接错误，原来是证书文件的问题。<br />
于是利用 InstallCert.java重新生成证书
<div>
<blockquote>java InstallCert smtp.dengdezhao.cn:465</blockquote>
</div>
将得到的证书cacert文件放置在任意路径下：比如C盘 c:/cacert</p>

<p>程序中props属性里添加如下参数
<div>
<blockquote>props = System.getProperties();<br />
props.put("mail.smtp.host", smtp.dengdezhao.cn); // 设置SMTP主机<br />
props.put("mail.smtp.auth", "true");<br />
props.put("mail.smtp.socketFactory.class",<br />
"javax.net.ssl.SSLSocketFactory");<br />
props.put("mail.smtp.socketFactory.fallback", "false");<br />
props.put("mail.smtp.socketFactory.port", "465");<br />
props.put("mail.debug", "true");<br />
props.put("javax.net.ssl.keyStore", "c:\\cacert");<br />
props.put("javax.net.ssl.trustStore", "c:\\cacert");</blockquote>
</div>
即可。</p>

<p>&nbsp;</p>
</article>

        <footer>
            <nav>
                <ul>
                    <li>:: <a href="http://pelican.dengdezhao.cn/categories.html">Categories</a></li>
                    <li>:: <a href="http://pelican.dengdezhao.cn/tags.html">Tags</a></li>
                </ul>
            </nav>
                <p id="theme-credit"><a href="http://mathieu.agopian.info/mnmlist/theme.html">Thème mnmlist</a></p>
        </footer>

</body>
</html>